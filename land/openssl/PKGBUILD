pkgname=openssl
pkgver=3.1.4
pkgrel=1
pkgdesc="A robust, commercial-grade, full-featured toolkit for general-purpose cryptography and secure communication."
arch=('i786')
makedepend=('zlib')
url="https://www.openssl.org/"
source=(
	"https://www.openssl.org/source/openssl-$pkgver.tar.gz"
	"$pkgname-$pkgver.patch"
	'50-xelix.conf'
)
sha256sums=(
	'840af5366ab9b522bde525826be3ef0fb0af81c6a9ebd84caa600fea1731eee3'
	'SKIP'
	'SKIP'
)

prepare() {
	cd $pkgname-$pkgver
	patch -p0 < ../$pkgname-$pkgver.patch
	cp ../50-xelix.conf Configurations
}

build() {
	cd $pkgname-$pkgver
	CROSS_COMPILE=i786-pc-xelix- ./Configure xelix-x86 no-shared no-hw no-threads no-dso no-asm 386 no-sse2 no-tests --prefix=/usr -DDSO_NONE
}

package() {
	cd $pkgname-$pkgver
	make DESTDIR=$pkgdir install
}
